
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>处理静态资源 · seal-cli</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="env.html" />
    
    
    <link rel="prev" href="pre-processors.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://pc.vue.sealui.com" target="_blank" class="custom-link">SealUI</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="structure.html">
            
                <a href="structure.html">
            
                    
                    项目结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="commands.html">
            
                <a href="commands.html">
            
                    
                    构建命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="babel.html">
            
                <a href="babel.html">
            
                    
                    Babel 配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="linter.html">
            
                <a href="linter.html">
            
                    
                    Linter 配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="pre-processors.html">
            
                <a href="pre-processors.html">
            
                    
                    预处理程序
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7" data-path="static.html">
            
                <a href="static.html">
            
                    
                    处理静态资源
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="env.html">
            
                <a href="env.html">
            
                    
                    环境变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="backend.html">
            
                <a href="backend.html">
            
                    
                    与后端集成框架
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="proxy.html">
            
                <a href="proxy.html">
            
                    
                    在开发过程中API代理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="unit.html">
            
                <a href="unit.html">
            
                    
                    单元测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="e2e.html">
            
                <a href="e2e.html">
            
                    
                    端到端测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="prerender.html">
            
                <a href="prerender.html">
            
                    
                    搜索引擎优化
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >处理静态资源</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="handling-static-assets">Handling Static Assets</h1>
<p>You will notice in the project structure we have two directories for static assets: <code>src/assets</code> and <code>static/</code>. What is the difference between them?</p>
<h3 id="webpacked-assets">Webpacked Assets</h3>
<p>To answer this question, we first need to understand how Webpack deals with static assets. In <code>*.vue</code> components, all your templates and CSS are parsed by <code>vue-html-loader</code> and <code>css-loader</code> to look for asset URLs. For example, in <code>&lt;img src=&quot;./logo.png&quot;&gt;</code> and <code>background: url(./logo.png)</code>, <code>&quot;./logo.png&quot;</code> is a relative asset path and will be <strong>resolved by Webpack as a module dependency</strong>.</p>
<p>Because <code>logo.png</code> is not JavaScript, when treated as a module dependency, we need to use <code>url-loader</code> and <code>file-loader</code> to process it. This template has already configured these loaders for you, so you get features such as filename fingerprinting and conditional base64 inlining for free, while being able to use relative/module paths without worrying about deployment.</p>
<p>Since these assets may be inlined/copied/renamed during build, they are essentially part of your source code. This is why it is recommended to place Webpack-processed static assets inside <code>/src</code>, alongside other source files. In fact, you don&apos;t even have to put them all in <code>/src/assets</code>: you can organize them based on the module/component using them. For example, you can put each component in its own directory, with its static assets right next to it.</p>
<h3 id="asset-resolving-rules">Asset Resolving Rules</h3>
<ul>
<li><p><strong>Relative URLs</strong>, e.g. <code>./assets/logo.png</code> will be interpreted as a module dependency. They will be replaced with an auto-generated URL based on your Webpack output configuration.</p>
</li>
<li><p><strong>Non-prefixed URLs</strong>, e.g. <code>assets/logo.png</code> will be treated the same as the relative URLs and translated into <code>./assets/logo.png</code>.</p>
</li>
<li><p><strong>URLs prefixed with <code>~</code></strong> are treated as a module request, similar to <code>require(&apos;some-module/image.png&apos;)</code>. You need to use this prefix if you want to leverage Webpack&apos;s module resolving configurations. For example if you have a resolve alias for <code>assets</code>, you need to use <code>&lt;img src=&quot;~assets/logo.png&quot;&gt;</code> to ensure that alias is respected.</p>
</li>
<li><p><strong>Root-relative URLs</strong>, e.g. <code>/assets/logo.png</code> are not processed at all.</p>
</li>
</ul>
<h3 id="getting-asset-paths-in-javascript">Getting Asset Paths in JavaScript</h3>
<p>In order for Webpack to return the correct asset paths, you need to use <code>require(&apos;./relative/path/to/file.jpg&apos;)</code>, which will get processed by <code>file-loader</code> and returns the resolved URL. For example:</p>
<pre><code class="lang-js">computed: {
  background () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./bgs/&apos;</span> + <span class="hljs-keyword">this</span>.id + <span class="hljs-string">&apos;.jpg&apos;</span>)
  }
}
</code></pre>
<p><strong>Note the above example will include every image under <code>./bgs/</code> in the final build.</strong> This is because Webpack cannot guess which of them will be used at runtime, so it includes them all.</p>
<h3 id="real-static-assets">&quot;Real&quot; Static Assets</h3>
<p>In comparison, files in <code>static/</code> are not processed by Webpack at all: they are directly copied to their final destination as-is, with the same filename. You must reference these files using absolute paths, which is determined by joining <code>build.assetsPublicPath</code> and <code>build.assetsSubDirectory</code> in <code>config.js</code>.</p>
<p>As an example, with the following default values:</p>
<pre><code class="lang-js"><span class="hljs-comment">// config/index.js</span>
<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-comment">// ...</span>
  build: {
    assetsPublicPath: <span class="hljs-string">&apos;/&apos;</span>,
    assetsSubDirectory: <span class="hljs-string">&apos;static&apos;</span>
  }
}
</code></pre>
<p>Any file placed in <code>static/</code> should be referenced using the absolute URL <code>/static/[filename]</code>. If you change <code>assetSubDirectory</code> to <code>assets</code>, then these URLs will need to be changed to <code>/assets/[filename]</code>.</p>
<p>We will learn more about the config file in the section about <a href="backend.html">backend integration</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="pre-processors.html" class="navigation navigation-prev " aria-label="Previous page: 预处理程序">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="env.html" class="navigation navigation-next " aria-label="Next page: 环境变量">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"处理静态资源","level":"1.7","depth":1,"next":{"title":"环境变量","level":"1.8","depth":1,"path":"env.md","ref":"env.md","articles":[]},"previous":{"title":"预处理程序","level":"1.6","depth":1,"path":"pre-processors.md","ref":"pre-processors.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":[]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"seal-cli","links":{"gitbook":false,"sharing":{"google":false,"facebook":false,"twitter":false,"all":false},"sidebar":{"SealUI":"http://pc.vue.sealui.com"}},"gitbook":"*","description":"seal-cli 文档","extension":null},"file":{"path":"static.md","mtime":"2017-12-19T10:53:17.678Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-12-20T02:56:51.999Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

